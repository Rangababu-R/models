components:
  schemas:
    BgpSrte.V4Policy:
      x-include:
      - '../../common/common.yaml#/components/schemas/Named.Object'
      - '../device.yaml#/components/schemas/Device.Active'
      description: |
        Configuration for BGP Segment Routing Traffic Engineering(SRTE) 
        policy.
      type: object
      required: [ipv4_endpoint]
      properties:
        distinguisher:
          description: >-
            4-octet value uniquely identifying the policy in the context of (color, endpoint) tuple.
            It is used by the SR Policy originator to make unique (from an NLRI perspective) 
            both for multiple candidate  paths of the same SR Policy as well as candidate paths 
            of different SR Policies (i.e. with different segment list) with the same Color 
            and Endpoint but meant for different head-ends.
          type: integer
          format: int64
          minimum: 0    
          maximum: 4294967295
          default: 1
        color:
          description: >-
            Policy color is used to match the color of the destination
            prefixes to steer traffic into the SR Policy.
          type: integer
          format: int64
          minimum: 0    
          maximum: 4294967295
          default: 100
        ipv4_endpoint:
          description: >-
            Specifies a single node or a set of nodes (e.g. an anycast
            address). It is selected on the basis of the SR Policy type (AFI).
          type: string
          format: ipv4
        next_hop_mode:
          description: >-
            Mode for choosing the NextHop in MP REACH NLRI. Available modes are :
            Local IP: Automatically fills the Nexthop with the Local IP of the BGP peer.
            For IPv6 BGP peer the Nexthop Encoding capability should be enabled.
            Manual: Override the Nexthop with any arbitrary IPv4/IPv6 address.
          type: string
          enum: [local_ip, manual]
          default: local_ip
        next_hop_address_type:
          description: >-
            Type of next hop IP address to be used when 'next_hop_mode' is set to 'manual'. 
          type: string
          enum: [ipv4, ipv6]
          default: ipv4
        next_hop_ipv4_address:
          description: >-
            The IPv4 address of the next hop if the Nexthop type 'next_hop_mode' is 'manual' and
            the Nexthop type 'next_hop_address_type' is IPv4. If BGP peer is of type IPv6, Nexthop Encoding
            capability extended_next_hop_encoding should be enabled.
          type: string
          format: ipv4
        next_hop_ipv6_address:
          description: >-
            The IPv6 address of the next hop if the Nexthop Mode 'next_hop_address_type'
            is 'manual' and the Nexthop type 'next_hop_address_type' is IPv6. 
          type: string
          format: ipv6
        advanced:
          $ref: './routepathattributes.yaml#/components/schemas/Bgp.RouteAdvanced'
        add_path:
          $ref: './bgpaddpath.yaml#/components/schemas/Bgp.AddPath'
        as_path:
          $ref: './bgpaspath.yaml#/components/schemas/Bgp.AsPath'
        communities:
          description: >-
            Optional Community settings.
          type: array
          items: 
            $ref: './bgpcommunity.yaml#/components/schemas/Bgp.Community'
        ext_communities:
          description: >-
            Optional Extended Community settings.
          type: array
          items: 
            $ref: './bgpextcommunity.yaml#/components/schemas/Bgp.ExtCommunity'
        tunnel_tlvs:
          description: >-
            List Tunnel Encapsulation Attributes.
          type: array
          items:
            $ref: './bgpsrtev4tunneltlv.yaml#/components/schemas/BgpSrte.V4TunnelTlv'
        