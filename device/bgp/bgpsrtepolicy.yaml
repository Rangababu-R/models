components:
  schemas:
    Bgp.SrTePolicy:
      x-include:
      - '../device.yaml#/components/schemas/Device.Active'
      description: |
        Configuration for BGP basic segment routing traffic engineering policy settings.
      type: object
      properties:
        policy_type:
          description: >-
            Address family indicator (AFI).
          type: string
          enum: [ipv4, ipv6]
          default: ipv4
        distinguisher:
          description: >-
            Identifies the policy in the context of (color and endpoint) tuple. 
            It is used by the SR Policy originator to make unique multiple 
            occurrences of the same SR Policy.
          type: integer
          default: 1
        color:
          description: >-
            Identifies the policy. It is used to match the color of the 
            destination prefixes to steer traffic into the SR Policy. 
          type: integer
          default: 100
        ipv4_endpoint:
          description: >-
            Specifies a single node or a set of nodes.
            It is selected on the basis of the policy_type (AFI).
          type: string
          format: ipv4
          default: 0.0.0.0
        ipv6_endpoint:
          description: >-
            Specifies a single node or a set of nodes.
            It is selected on the basis of the policy_type (AFI).
          type: string
          format: ipv6
          default: ::0
        next_hop_mode:
          description: >-
            Specify the NextHop in MP REACH NLRI. The mode for setting the IP address 
            of the NextHop in the MP REACH NLRI can be one of the following:
              Local IP: Automatically fills the Nexthop with the Local IP of the BGP peer.
              If BGP peer is of type IPv6, Nexthop Encoding capability should be enabled.
              Manual: Override the Nexthop with any arbitrary IPv4/IPv6 address.   
          type: string
          enum: [local_ip, manual]
          default: local_ip
        next_hop_address_type:
          description: >-
            If the Nexthop Mode is Manual, it sets the type of the NextHop IP address. 
          type: string
          enum: [ipv4, ipv6]
          default: ipv4
        next_hop_ipv4_address:
          description: >-
            The IPv4 address of the next hop if the Nexthop Mode is manual and
            the Nexthop type is IPv4. If BGP peer is of type IPv6, Nexthop Encoding
            capability should be enabled.
          type: string
          format: ipv4
          default: 0.0.0.0
        next_hop_ipv6_address:
          description: >-
            The IPv6 address of the next hop if the Nexthop Mode is manual and
            the Nexthop type is IPv6. 
          type: string
          format: ipv6
          default: ::0
        add_path:
          $ref: './bgpaddpath.yaml#/components/schemas/Bgp.AddPath'
        as_path:
          $ref: './bgpaspath.yaml#/components/schemas/Bgp.AsPath'
        tunnel_tlvs:
          description: >-
            List of optional tunnel TLV settings.
          type: array
          items:
            $ref: './bgpsrtetunneltlv.yaml#/components/schemas/BgpSrte.TunnelTlv'
        communities:
          description: >-
            Optional community settings.
          type: array
          items: 
            $ref: './bgpcommunity.yaml#/components/schemas/Bgp.Community'