components:
  schemas:
    Router.SimulatedTopology:
      x-status: under-review
      x-include:
      - '../common/common.yaml#/components/schemas/Named.Object'
      description: >-
        This contains the properties of a simulated topology.
      type: object
      properties:  
        nodes:
          description: >-
            This contains one or more simulated node.
          type: array
          items:
            $ref: '#/components/schemas/Router.SimulatedTopologyNode'
                
    Router.SimulatedTopologyNode:
      x-include:
      - '../common/common.yaml#/components/schemas/Named.Object'
      description: >-
        A container of properties for a simulated node.
      type: object
      properties:
        links:
          description: >-
            This contains the properties of one or more links to other nodes.
          type: array
          items:
            $ref: '#/components/schemas/Router.SimulatedTopologyLink'
        isis_sim_router:
          description: >-
            This contains the properties of a simulated isis router.
          $ref: './isissimulatedtopology/isissimulatedtopologyrouter.yaml#/components/schemas/Router.IsisSimulatedTopology.Router'
        ospf_sim_router:
          description: >-
            This contains the properties of a simulated ospf router.
          $ref: './ospfsimulatedtopology/ospfsimulatedtopologyrouter.yaml#/components/schemas/Router.OspfSimulatedTopology.Router'

    Router.SimulatedTopologyLink:
      description:
        This defines a two way link with the peer node. If the peer node also has 
        a link to this node it will be treated as a separate link between the nodes.
      type: object
      properties:
        connected_node_type:
          description: >-
            It defines whether this link is connected to an emulated router or a simulated router.
            If the type is emulated router then the connected router is automatically determined
            based on the Router of which this simulated topology is a part.
          type: string
          enum:
          - connected_to_st_router
          - connected_to_em_router
          - connected_to_external_router
          default: connected_to_st_router
        st_router_name: 
          description: >-
            The unique name of the simulated router to which this link is conected. 
            Note that it can only be connected to another node of the same topology.  
          type: string
          x-constraint:
            - '/components/schemas/Router.SimulatedTopologyNode/properties/name'
        external_router_name:
          description: >-
            The unique name of the simulated router or emulated router in another topology to
             which this link is conected. 
          type: string
          x-constraint:
            - '/components/schemas/Router.SimulatedTopologyNode/properties/name'
            - '/components/schemas/Router/name'
        enable_ipv4_address:
          description: >-
            If this is enabled then endpoints of this link will have the Ipv4 To and From addresses.
          type: boolean
          default: true        
        ipv4_from_address:
            description: >-
              The IPv4 From address.
            type: string
            format: ipv4
            default: 0.0.0.0
        ipv4_to_address:
          description: >-
            The IPv6 To address.
          type: string
          format: ipv4
          default: 0.0.0.0
        ipv4_prefix_lenght:
          description: >-
            Ipv4 prefix lenght of the From and To address
          type: integer
          minimum: 1
          maximum: 32
          default: 16
        enable_ipv6_address:
          description: >-
            If this is enabled then endpoints of this link will have the Ipv6 To and From addresses.
          type: boolean
          default: false
        ipv6_from_address:
          description: >-
            The IPv6 From address.
          type: string
          format: ipv6
          default: ::0
        ipv6_to_address:
          description: >-
            The IPv6 To address.
          type: string
          format: ipv6
          default: ::0
        ipv6_prefix_length:
          description: >-
            Ipv6 prefix lenght of the From and To address.
          type: integer
          minimum: 1
          maximum: 128
          default: 64
        isis_sim_link:
          description: >-
              This contains the properties of a simulated Isis Link.
          $ref: './isissimulatedtopology/isissimulatedtopologylink.yaml#/components/schemas/Router.IsisSimulatedTopology.Link'  
        ospf_sim_link:
          description: >-
            This contains the properties of a simulated Ospf Link.
          $ref: './ospfsimulatedtopology/ospfsimulatedtopologylink.yaml#/components/schemas/Router.OspfSimulatedTopology.Link'
