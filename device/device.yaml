openapi: 3.1.0

info:
  title: Emulated device model
  version: ^0.0.0

components:
  schemas:
    Device:
      description: >-
        A container for emulated protocol devices.
      type: object
      required: [name, choice]
      properties:
        name: '../common/common.yaml#/components/x-inline/UniqueName'
        choice:
          description: >-
            The type of emulated protocol interface or device.
          type: string
          enum: [ethernet, ipv4, ipv6, bgpv4]
        device_count:
          description: >-
            The number of emulated protocol devices or interfaces per port.

            The device_count is also used by the individual child properties 
            that are a container for a /components/schemas/Device.Pattern.
            
            Example:
            If the device_count is 10 and the choice is ethernet then an
            implementation should create 10 ethernet interfaces.
            The ethernet property is a container for src, dst and eth_type 
            properties with each property being a pattern container for 10 
            possible values.  
          type: integer
          default: 1
        ethernet:
          $ref: './ethernet.yaml#/components/schemas/Device.Ethernet'
        ipv4:
          $ref: './ipv4.yaml#/components/schemas/Device.Ipv4'
        ipv6:
          $ref: './ipv6.yaml#/components/schemas/Device.Ipv6'
        bgpv4:
          $ref: './bgpv4.yaml#/components/schemas/Device.Bgpv4'
